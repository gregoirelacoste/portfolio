# Migration `20201006152010-two`

This migration has been generated by Gregoire at 10/6/2020, 5:20:10 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Dossier" DROP CONSTRAINT "Dossier_userId_fkey"

ALTER TABLE "public"."Dossier" DROP COLUMN "userId"

ALTER TABLE "public"."User" ADD COLUMN "dossierId" integer   

ALTER TABLE "public"."User" ADD FOREIGN KEY ("dossierId")REFERENCES "public"."Dossier"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201006142320-first..20201006152010-two
--- datamodel.dml
+++ datamodel.dml
@@ -1,26 +1,25 @@
 generator client {
   provider = "prisma-client-js"
   output   = "./clientGenerated"
-
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id    Int     @id @default(autoincrement())
   email String  @unique
   name  String?
-  dossiers Dossier[]
+  dossier Dossier? @relation(fields:[dossierId], references:[id])
+  dossierId Int?
 }
 model Dossier {
   id          Int     @id @default(autoincrement())
   name        String
   description String?
   numero      String
-  user        User? @relation(fields:[userId], references:[id])
-  userId      Int?
+  user        User[]
 }
```


