# Migration `20201007091649-3`

This migration has been generated by Gregoire at 10/7/2020, 11:16:49 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" DROP CONSTRAINT "User_dossierId_fkey"

ALTER TABLE "public"."Dossier" ADD COLUMN "userId" integer   

ALTER TABLE "public"."User" DROP COLUMN "dossierId"

ALTER TABLE "public"."Dossier" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201006153458-4..20201007091649-3
--- datamodel.dml
+++ datamodel.dml
@@ -4,22 +4,23 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id    Int     @id @default(autoincrement())
   email String  @unique
   name  String?
-  dossier Dossier? @relation(fields:[dossierId], references:[id])
-  dossierId Int?
+  dossiers Dossier[]
 }
 model Dossier {
   id          Int     @id @default(autoincrement())
   name        String
   description String?
   numero      String
-  user        User[]
+    userId Int?
+
+  user User? @relation(fields:[userId], references:[id])
 }
```


